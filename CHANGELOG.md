# Changelog

Все изменения этого проекта будут документироваться в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/)
и этот проект использует [SemVer](https://semver.org/lang/ru/) для нумерации версий.

---
# [1.1.2] - 2025-07-16

#Added
- Реализована основа системы вебсокетов
- Переработанны методы хранения информации об игроке
- Реализованн заход в лобби за выжившего
- Реализован заход в кастомное лобби?

---
## [1.1.1] - 2025-07-12  

### Added
- Реализован запрос получения конфига сервера  
- Реализован запрос проверки текущей версии клиента  
- Добавлены эндпоинты для получения и обновления кошелька пользователя  
- Добавлены эндпоинты для получения, добавления и удаления предметов инвентаря  
- Реализована работа с бинарным сейвом профиля через `/players/me/states/FullProfile/binary`  
- Сохраняется и отдается дефолтный сейв для новых пользователей  
- Добавлена выдача стартовых валют при создании пользователя  
- Добавлен флаг первого входа пользователя для разовой выдачи бонусов  
- Реализован ручной эндпоинт получения BonusBloodpoints только на первый логин  
- Обновлены модели базы: бинарное хранение сейва, разделение кошелька и инвентаря  
- Импортированы и структурированы заглушки для большинства методов Kraken  
- Добавлен возврат списка сообщений (Inbox) для клиента  
- Добавлен базовый механизм имени игрока и генерации tag’а  
- Реализованы заглушки для миграции кошелька, store/transactions, ownedProducts, richPresence и других обязательных ручек  
- Добавлен возврат текущего уровня и XP игрока  
- Внесены улучшения в документацию методов и базовые проверки сессий/куков

### Changed
- Модели SQLAlchemy для пользователей и связанных таблиц приведены к актуальному виду (новые поля, binary save и пр.)  
- Поведение выдачи сейва, кошелька и инвентаря теперь строго повторяет Kraken API  
- Проверка первого входа теперь происходит через отдельный булевый флаг  
- Базовые настройки и стартовые значения вынесены в config.py

### Fixed
- Исправлены ошибки с типами данных при сохранении бинарных данных  
- Исправлена обработка куков и сессий  
- Исправлен возврат пустого кошелька/инвентаря при отсутствии данных

### Future
- Добавить реализацию аналитики на всех ссылках  
- Реализовать логику “согласий” (consent) и другие API связанные с GDPR/политиками  
- Импортировать/синхронизировать Shop, Shrine, Archives endpoints

---

## [1.1.0] — 2025-07-10
### Added
- Базовая логика пользователей, сессий, логина через Steam.
- Реализована проверка бана пользователя по Steam ID и куке.
- Добавлен декоратор `refresh_session` для обновления сессии при любом запросе.
- Добавлен метод очистки истёкших сессий.
- Автоматическая очистка устаревших сессий при старте приложения.
- Новые тесты для SessionManager.

### Changed
- Убрана лишняя проверка Steam ID в роуте `/auth/provider/steam/login`.
- Переписан менеджер сессий для асинхронной работы.

### Fixed
- Исправлен баг с путём до базы `SESSIONS.db` (теперь ищет относительно корня).
- Исправлена ошибка при повторном создании сессии (удаление старых сессий).

---

## [1.0.0] — 2025-07-01
### Added
- Базовая логика пользователей, сессий, логина через Steam.
